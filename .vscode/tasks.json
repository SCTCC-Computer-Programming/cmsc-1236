{
  "version": "2.0.0",
  "tasks": [
    {
      "label": "Site: Start clean (sync + hard clean + export notebooks + preview)",
      "type": "shell",
      "command": "set -e; grep -qE '^[[:space:]]*type:[[:space:]]*website[[:space:]]*$' \"${workspaceFolder}/_quarto.yml\"; rsync -a --delete \"/Volumes/Anger/work/courses/shared/\" \"${workspaceFolder}/shared/\" && rm -rf \"${workspaceFolder}/_site\" \"${workspaceFolder}/.quarto\" && mkdir -p \"${workspaceFolder}/downloads\" && find \"${workspaceFolder}/assignments\" -type f -name \"week-*-demo.qmd\" -print0 2>/dev/null | while IFS= read -r -d '' f; do weekdir=\"$(basename \"$(dirname \"$f\")\")\"; mkdir -p \"${workspaceFolder}/downloads/$weekdir\"; out=\"$(basename \"$f\" .qmd).ipynb\"; quarto render \"$f\" --to ipynb --no-execute --output-dir \"${workspaceFolder}/downloads/$weekdir\" --output \"$out\"; done && cd \"${workspaceFolder}\" && quarto preview",
      "options": {
        "cwd": "${workspaceFolder}",
        "env": {
          "QUARTO_PYTHON": "${workspaceFolder}/.venv/bin/python"
        }
      },
      "problemMatcher": []
    },
    {
      "label": "Site: Refresh (sync + export notebooks + preview)",
      "type": "shell",
      "command": "set -e; grep -qE '^[[:space:]]*type:[[:space:]]*website[[:space:]]*$' \"${workspaceFolder}/_quarto.yml\"; rsync -a --delete \"/Volumes/Anger/work/courses/shared/\" \"${workspaceFolder}/shared/\" && mkdir -p \"${workspaceFolder}/downloads\" && find \"${workspaceFolder}/assignments\" -type f -name \"week-*-demo.qmd\" -print0 2>/dev/null | while IFS= read -r -d '' f; do weekdir=\"$(basename \"$(dirname \"$f\")\")\"; mkdir -p \"${workspaceFolder}/downloads/$weekdir\"; out=\"$(basename \"$f\" .qmd).ipynb\"; quarto render \"$f\" --to ipynb --no-execute --output-dir \"${workspaceFolder}/downloads/$weekdir\" --output \"$out\"; done && cd \"${workspaceFolder}\" && quarto preview",
      "options": {
        "cwd": "${workspaceFolder}",
        "env": {
          "QUARTO_PYTHON": "${workspaceFolder}/.venv/bin/python"
        }
      },
      "problemMatcher": []
    },
    {
      "label": "Site: Publish to GitHub (sync + hard clean + export notebooks + render + publish)",
      "type": "shell",
      "command": "set -e; grep -qE '^[[:space:]]*type:[[:space:]]*website[[:space:]]*$' \"${workspaceFolder}/_quarto.yml\"; rsync -a --delete \"/Volumes/Anger/work/courses/shared/\" \"${workspaceFolder}/shared/\" && rm -rf \"${workspaceFolder}/_site\" \"${workspaceFolder}/.quarto\" && mkdir -p \"${workspaceFolder}/downloads\" && find \"${workspaceFolder}/assignments\" -type f -name \"week-*-demo.qmd\" -print0 2>/dev/null | while IFS= read -r -d '' f; do weekdir=\"$(basename \"$(dirname \"$f\")\")\"; mkdir -p \"${workspaceFolder}/downloads/$weekdir\"; out=\"$(basename \"$f\" .qmd).ipynb\"; quarto render \"$f\" --to ipynb --no-execute --output-dir \"${workspaceFolder}/downloads/$weekdir\" --output \"$out\"; done && cd \"${workspaceFolder}\" && quarto render && quarto publish gh-pages --no-prompt",
      "options": {
        "cwd": "${workspaceFolder}",
        "env": {
          "QUARTO_PYTHON": "${workspaceFolder}/.venv/bin/python"
        }
      },
      "problemMatcher": []
    },
    {
      "label": "1236: Render active QMD to notebook (no outputs) â†’ downloads/",
      "type": "shell",
      "command": "set -e; FILE='${file}'; case \"$FILE\" in *.qmd) export QUARTO_PYTHON=\"${workspaceFolder}/.venv/bin/python\"; rsync -a --delete \"/Volumes/Anger/work/courses/shared/\" \"${workspaceFolder}/shared/\" && BASENAME=\"$(basename \"$FILE\" .qmd)\" && REL=\"${FILE#${workspaceFolder}/}\" && WEEKDIR=\"\"; case \"$REL\" in assignments/week-*/*) WEEKDIR=\"$(echo \"$REL\" | cut -d/ -f2)\" ;; esac; if [ -n \"$WEEKDIR\" ]; then OUTDIR=\"${workspaceFolder}/downloads/$WEEKDIR\"; else OUTDIR=\"${workspaceFolder}/downloads/adhoc\"; fi; mkdir -p \"$OUTDIR\" && quarto render \"$FILE\" --to ipynb --no-execute --output-dir \"$OUTDIR\" --output \"$BASENAME.ipynb\" ;; *) echo \"Active file is not .qmd: $FILE\" ;; esac",
      "options": { "cwd": "${workspaceFolder}" },
      "problemMatcher": []
    }
  ]
}
